"use strict";(self.webpackChunkshmooz_admin=self.webpackChunkshmooz_admin||[]).push([[320],{60320:function(e,r,t){t.r(r),t.d(r,{default:function(){return z}});var n=t(15861),o=t(1413),i=t(29439),l=t(64687),a=t.n(l),s=t(47313),c=t(58467),u=t(47131),d=t(21917),f=t(61113),h=t(78490),p=t(80315),g=t(42832),m=t(24193),x=t(19536),_=t(33497),v=t(66182),b=t(9019),y=t(24631),Z=t(32729),j=t(83929),C=t(44758),k=t(19860),E=t(79429),q=t(3463),P=t(16),T=t.n(P),D=(t(94230),t(85554)),w=t(84517),B=t(46417),F=q.Ry({title:q.Z_().required("Title is required"),description:q.Z_().required("Description is required"),excerpt:q.Z_().required("Excerpt is required"),category_id:q.Z_().nullable().required("Category is required"),booking_close_before:q.Rx().integer("Please enter a number")}),S=function(e){var r=e.detailsData,t=e.setDetailsData,n=e.handleNext,i=(e.setErrorIndex,(0,E.TA)({enableReinitialize:!0,initialValues:{title:r.title||"",description:r.description||"",slug:r.slug||"",excerpt:r.excerpt||"",category_id:r.category_id,faq:r.faq,offline_payment_info:r.offline_payment_info||"",booking_close_before:r.booking_close_before,is_private:r.is_private,featured:r.featured,emergency_contact_number:r.emergency_contact_number||""},validationSchema:F,onSubmit:function(e,r){var l=r.setFieldError,a=r.setFieldTouched,s=r.setErrors;r.dirty;console.log(i);var c={title:e.title,description:e.description,slug:e.slug,excerpt:e.excerpt,category_id:e.category_id,faq:e.faq,offline_payment_info:e.offline_payment_info,booking_close_before:e.booking_close_before,is_private:e.is_private,featured:e.featured,emergency_contact_number:e.emergency_contact_number};t((function(e){return(0,o.Z)((0,o.Z)({},e),c)})),n(c,{setFieldTouched:a,setErrors:s,setFieldError:l,dirty:i.dirty})}})),l=(0,k.Z)(),a=(0,D.I0)();(0,s.useEffect)((function(){a((0,w.fQ)())}),[a]);var c=(0,D.v9)((function(e){return console.log(e),e.category})).categories;(0,s.useMemo)((function(){return c.find((function(e){return e.id===i.values.category_id}))}),[i.values.category_id]);return(0,s.useEffect)((function(){console.log(i.values)}),[i.values]),(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(f.Z,{variant:"h5",gutterBottom:!0,sx:{mb:2},children:"Details"}),(0,B.jsx)("form",{onSubmit:i.handleSubmit,id:"validation-forms",children:(0,B.jsxs)(b.ZP,{container:!0,spacing:3,style:{overflow:"auto"},children:[(0,B.jsx)(b.ZP,{item:!0,xs:12,children:(0,B.jsx)(y.Z,{id:"title",name:"title",label:"Title *",value:i.values.title,onChange:i.handleChange,error:i.touched.title&&Boolean(i.errors.title),helperText:i.touched.title&&i.errors.title,fullWidth:!0,autoComplete:"given-name"})}),(0,B.jsx)(b.ZP,{item:!0,xs:12,children:(0,B.jsx)(y.Z,{fullWidth:!0,multiline:!0,rows:3,id:"description",name:"description",label:"Description *",value:i.values.description,onChange:i.handleChange,error:i.touched.title&&Boolean(i.errors.description),helperText:i.touched.title&&i.errors.description})}),(0,B.jsx)(b.ZP,{item:!0,xs:12,sm:6,children:(0,B.jsx)(y.Z,{id:"slug",name:"slug",label:"Slug",value:i.values.slug,onChange:i.handleChange,error:i.touched.slug&&Boolean(i.errors.slug),helperText:i.touched.slug&&i.errors.slug,fullWidth:!0})}),(0,B.jsx)(b.ZP,{item:!0,xs:12,sm:6,children:(0,B.jsx)(y.Z,{id:"excerpt",name:"excerpt",label:"Excerpt *",value:i.values.excerpt,onChange:i.handleChange,error:i.touched.excerpt&&Boolean(i.errors.excerpt),helperText:i.touched.excerpt&&i.errors.excerpt,fullWidth:!0})}),(0,B.jsx)(b.ZP,{item:!0,xs:12,children:(0,B.jsx)(Z.Z,{id:"category_id",name:"category_id",options:c,getOptionLabel:function(e){return e.name},isOptionEqualToValue:function(e,r){return console.log(r),e.id===(null===r||void 0===r?void 0:r.id)},value:c.find((function(e){return e.id===i.values.category_id}))||null,onChange:function(e,r){console.log(r),i.setFieldValue("category_id",(null===r||void 0===r?void 0:r.id)||null)},renderInput:function(e){return(0,B.jsx)(y.Z,(0,o.Z)((0,o.Z)({},e),{},{label:"Category *",placeholder:"Select Category",error:i.touched.category_id&&Boolean(i.errors.category_id),helperText:i.touched.category_id&&i.errors.category_id}))}})}),(0,B.jsxs)(b.ZP,{item:!0,xs:12,sx:{"& .quill":{bgcolor:"dark"===l.palette.mode?"dark.main":"grey.50",borderRadius:"12px","& .ql-toolbar":{bgcolor:"dark"===l.palette.mode?"dark.light":"grey.100",borderColor:"dark"===l.palette.mode?l.palette.dark.light+20:"grey.400",borderTopLeftRadius:"12px",borderTopRightRadius:"12px"},"& .ql-container":{borderColor:"dark"===l.palette.mode?"".concat(l.palette.dark.light+20," !important"):"".concat(l.palette.grey[400]," !important"),borderBottomLeftRadius:"12px",borderBottomRightRadius:"12px","& .ql-editor":{minHeight:125}}}},children:[(0,B.jsx)(f.Z,{variant:"subtitle1",children:"FAQs"}),(0,B.jsx)(T(),{theme:"snow",value:i.values.faq,onChange:function(e){console.log(e),i.setFieldValue("faq",e)}})]}),(0,B.jsx)(b.ZP,{item:!0,xs:12,children:(0,B.jsx)(y.Z,{id:"offline_payment_info",name:"offline_payment_info",label:"Offline Payment Info",multiline:!0,rows:2,value:i.values.offline_payment_info,onChange:i.handleChange,error:i.touched.offline_payment_info&&Boolean(i.errors.offline_payment_info),helperText:i.touched.offline_payment_info&&i.errors.offline_payment_info,fullWidth:!0})}),(0,B.jsx)(b.ZP,{item:!0,xs:12,children:(0,B.jsx)(y.Z,{id:"booking_close_before",name:"booking_close_before",label:"Booking Close Before (in mins) *",type:"number",value:i.values.booking_close_before,onChange:i.handleChange,error:i.touched.booking_close_before&&Boolean(i.errors.booking_close_before),helperText:i.touched.booking_close_before&&i.errors.booking_close_before,fullWidth:!0})}),(0,B.jsx)(b.ZP,{item:!0,xs:12,sm:6,children:(0,B.jsx)(j.Z,{control:(0,B.jsx)(C.Z,{color:"secondary",name:"is_private",value:i.values.is_private,onChange:i.handleChange}),label:"Is Private"})}),(0,B.jsx)(b.ZP,{item:!0,xs:12,sm:6,children:(0,B.jsx)(j.Z,{control:(0,B.jsx)(C.Z,{color:"secondary",name:"featured",value:i.values.featured,onChange:i.handleChange}),label:"Featured"})}),(0,B.jsx)(b.ZP,{item:!0,xs:12,children:(0,B.jsx)(y.Z,{id:"emergency_contact_number",name:"emergency_contact_number",label:"Emergency Contact",type:"number",value:i.values.emergency_contact_number,onChange:i.handleChange,error:i.touched.emergency_contact_number&&Boolean(i.errors.emergency_contact_number),helperText:i.touched.emergency_contact_number&&i.errors.emergency_contact_number,fullWidth:!0})}),(0,B.jsx)(b.ZP,{item:!0,xs:12,children:(0,B.jsx)(g.Z,{direction:"row",justifyContent:"flex-end",children:(0,B.jsx)(v.Z,{children:(0,B.jsx)(m.Z,{variant:"contained",sx:{my:3,ml:1},type:"submit",children:"Next"})})})})]})})]})},I=t(74652),R=t(85077),N=t(53774),W=[{step:"detail",label:"Basic Details"}],O=function(e){var r=e.step,t=e.handleNext,n=e.setErrorIndex,o=e.detailsData,i=e.setDetailsData;return 0===r?(0,B.jsx)(S,{handleNext:t,setErrorIndex:n,detailsData:o,setDetailsData:i}):(0,B.jsx)("div",{children:"No Step Found"})},V={"& .MuiCardHeader-action":{m:0,alignSelf:"center"}},z=function(e){var r=e.venue,t=(0,D.I0)(),l=(0,c.UO)().slug,b=(0,c.s0)(),y=s.useState(0),Z=(0,i.Z)(y,2),j=Z[0],C=Z[1],k=s.useState((0,o.Z)({booking_close_before:30,featured:!1,is_private:!1,country_id:null,state_id:null,city_id:null,id:null},r)),E=(0,i.Z)(k,2),q=E[0],P=E[1],T=s.useState(null),w=(0,i.Z)(T,2),F=w[0],S=w[1];(0,s.useEffect)((function(){if(l){var e=function(){var e=(0,n.Z)(a().mark((function e(){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.Z.get("/api/venues/".concat(l));case 2:r=e.sent,P((function(e){var t;return(0,o.Z)((0,o.Z)({},e),null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.data)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e().catch()}}),[l]);var z=function(e){P((function(r){var t;return(0,o.Z)((0,o.Z)({},r),null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data)})),C(j+1)},A=function(){var e=(0,n.Z)(a().mark((function e(r,t,n,o,i){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t,!0,!0);case 2:i(t,r[t].join(", "));case 3:case"end":return e.stop()}}),e)})));return function(r,t,n,o,i){return e.apply(this,arguments)}}(),L=function(e){var r=e.setFieldTouched,t=void 0===r?null:r,n=e.setErrors,o=void 0===n?null:n,i=e.setFieldError,l=void 0===i?null:i;return function(e){var r;if(null!==e&&void 0!==e&&null!==(r=e.data)&&void 0!==r&&r.errors){var n,i=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.errors;Object.keys(i).forEach((function(e){A(i,e,t,o,l)}))}}},U=function(){var e=(0,n.Z)(a().mark((function e(r,n){var o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{r.step=null===(o=W[j])||void 0===o?void 0:o.step,r.id=q.id,r._method=null,r.id&&n.dirty?(r._method="put",t((0,I.NZ)(r,z,L(n)))):r.id?C(j+1):t((0,I.nY)(r,z,L(n)))}catch(i){console.error(i)}S(null);case 2:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){console.log(q)}),[q]),(0,B.jsxs)(_.Z,{title:"".concat(null!==q&&void 0!==q&&q.id?"Update":"Add"," Venue"),secondary:(0,B.jsx)(u.Z,{onClick:function(){return b("/manage/venue-list",{replace:!0})},size:"large",children:(0,B.jsx)(N.Z,{})}),headerSX:V,children:[(0,B.jsx)(d.Z,{activeStep:j,sx:{pt:3,pb:5},children:W.map((function(e,r){var t=e.step,n=e.label,i={};return r===F&&(i.optional=(0,B.jsx)(f.Z,{variant:"caption",color:"error",children:"Error"}),i.error=!0),(0,B.jsx)(h.Z,{children:(0,B.jsx)(p.Z,(0,o.Z)((0,o.Z)({},i),{},{children:n}))},t)}))}),(0,B.jsx)(B.Fragment,{children:j===W.length?(0,B.jsx)(B.Fragment,{children:(0,B.jsxs)(g.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,B.jsx)(f.Z,{variant:"h5",gutterBottom:!0,children:"Would you like to publish this venue?"}),(0,B.jsx)(v.Z,{children:(0,B.jsx)(m.Z,{variant:"contained",color:"error",onClick:function(){var e={id:q.id,publish:!q.publish,step:"detail",_method:"put"};t((0,I.NZ)(e,z,L({})))},sx:{my:3,ml:1},children:null!==q&&void 0!==q&&q.publish?"Un-Publish":"Publish"})})]})}):(0,B.jsx)(B.Fragment,{children:O({step:j,handleNext:U,setErrorIndex:S,detailsData:q,setDetailsData:P})})}),(0,B.jsx)(x.Z,{})]})}}}]);